{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\joha\\\\Desktop\\\\dcake1\\\\DreamCakeFront\\\\src\\\\components\\\\notification\\\\notification.jsx\";\nimport React from \"react\";\nimport ReactNotification from 'react-notifications-component';\nimport 'react-notifications-component/dist/theme.css';\nimport { store } from 'react-notifications-component';\nimport Cookies from 'js-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class Notification extends React.Component {\n  constructor(props) {\n    super(props); // this.state={\n    // \tdataFromServer: \"\"\n    // }\n\n    this.sendData = e => {};\n  }\n\n  componentDidMount() {\n    this.reloadPedidoUser();\n  }\n\n  stateFromatter(state) {\n    let states = [\"En proceso\", \"Enviado\", \"Entregado\"];\n    return states[state];\n  }\n\n  addNFT(message) {\n    let mensaje = message.model == \"pedido.Pedido\" ? `Pedido actualizado\\nEstado: ${this.stateFromatter(message.instance.estado)}` : \"Nueva actividad en tus posts\";\n    let titulo = message.model == \"pedido.Pedido\" ? \"Pedido actualizado\" : \"Nueva actividad\";\n    store.addNotification({\n      title: titulo,\n      message: mensaje,\n      type: \"success\",\n      insert: \"top\",\n      container: \"bottom-right\",\n      animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n      animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n      dismiss: {\n        duration: 5000,\n        onScreen: true\n      }\n    });\n  }\n\n  sendPedido() {\n    this.ws.send(JSON.stringify({\n      type: \"subscribe\",\n      id: new Date().getTime(),\n      action: 'list',\n      model: \"pedido.Pedido\"\n    }));\n  }\n\n  sendPost() {\n    this.ws.send(JSON.stringify({\n      type: \"subscribe\",\n      id: new Date().getTime(),\n      action: 'list',\n      model: \"social.Post\"\n    }));\n  }\n\n  reloadPedidoUser() {\n    this.ws = new WebSocket(\"ws://localhost:8000/ws/pedidoUser/\");\n\n    this.ws.onopen = evt => {\n      this.sendPedido();\n      console.log(\"open\");\n    };\n\n    this.ws.onclose = evt => {\n      console.log('disconnected reloadiong'); //if (Cookies.get('sessionid') != undefined) this.reloadPedidoUser()\n\n      this.reloadPedidoUser();\n    };\n\n    this.ws.onmessage = evt => {\n      const message = JSON.parse(evt.data); // this.setState({ dataFromServer: message })\n\n      this.props.notificationManager(message);\n      this.addNFT(message);\n    };\n\n    this.ws.onerror = evt => {\n      console.log(JSON.stringify(evt));\n    };\n  }\n\n  reloadPostUser() {\n    this.ws = new WebSocket(\"ws://localhost:8000/ws/socialUser/\");\n\n    this.ws.onopen = evt => {\n      this.sendPost();\n    };\n\n    this.ws.onclose = evt => {\n      console.log('disconnected reloadiong');\n      if (Cookies.get('sessionid') != undefined) this.reloadPedidoUser();\n    };\n\n    this.ws.onmessage = evt => {\n      const message = JSON.parse(evt.data); // this.setState({ dataFromServer: message })\n      // console.log(message);\n\n      this.addNFT(message);\n    };\n\n    this.ws.onerror = evt => {\n      console.log(JSON.stringify(evt));\n    };\n  }\n\n  render() {\n    this.sendData.bind(this);\n    return /*#__PURE__*/_jsxDEV(ReactNotification, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 4\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/joha/Desktop/dcake1/DreamCakeFront/src/components/notification/notification.jsx"],"names":["React","ReactNotification","store","Cookies","Notification","Component","constructor","props","sendData","e","componentDidMount","reloadPedidoUser","stateFromatter","state","states","addNFT","message","mensaje","model","instance","estado","titulo","addNotification","title","type","insert","container","animationIn","animationOut","dismiss","duration","onScreen","sendPedido","ws","send","JSON","stringify","id","Date","getTime","action","sendPost","WebSocket","onopen","evt","console","log","onclose","onmessage","parse","data","notificationManager","onerror","reloadPostUser","get","undefined","render","bind"],"mappings":"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","sourcesContent":["import React from \"react\";\r\n\r\nimport ReactNotification from 'react-notifications-component'\r\nimport 'react-notifications-component/dist/theme.css'\r\n\r\nimport { store } from 'react-notifications-component';\r\nimport Cookies from 'js-cookie';\r\n\r\nexport class Notification extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t// this.state={\r\n\t\t// \tdataFromServer: \"\"\r\n\t\t// }\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.reloadPedidoUser();\r\n\t}\r\n\r\n\tstateFromatter(state){\r\n\t\tlet states = [\"En proceso\", \"Enviado\", \"Entregado\"];\r\n\t\treturn states[state];\r\n\t}\r\n\r\n\taddNFT(message) {\r\n\t\tlet mensaje = message.model == \"pedido.Pedido\" ? `Pedido actualizado\\nEstado: ${this.stateFromatter(message.instance.estado)}` : \"Nueva actividad en tus posts\";\r\n\t\tlet titulo = message.model == \"pedido.Pedido\" ? \"Pedido actualizado\" : \"Nueva actividad\"\r\n\t\tstore.addNotification({\r\n\t\t\ttitle: titulo,\r\n\t\t\tmessage: mensaje,\r\n\t\t\ttype: \"success\",\r\n\t\t\tinsert: \"top\",\r\n\t\t\tcontainer: \"bottom-right\",\r\n\t\t\tanimationIn: [\"animate__animated\", \"animate__fadeIn\"],\r\n\t\t\tanimationOut: [\"animate__animated\", \"animate__fadeOut\"],\r\n\t\t\tdismiss: {\r\n\t\t\t\tduration: 5000,\r\n\t\t\t\tonScreen: true\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tsendPedido() {\r\n\t\tthis.ws.send(JSON.stringify({\r\n\t\t\ttype: \"subscribe\",\r\n\t\t\tid: new Date().getTime(),\r\n\t\t\taction: 'list',\r\n\t\t\tmodel: \"pedido.Pedido\"\r\n\t\t}))\r\n\t}\r\n\r\n\tsendPost() {\r\n\t\tthis.ws.send(JSON.stringify({\r\n\t\t\ttype: \"subscribe\",\r\n\t\t\tid: new Date().getTime(),\r\n\t\t\taction: 'list',\r\n\t\t\tmodel: \"social.Post\"\r\n\t\t}))\r\n\t}\r\n\r\n\treloadPedidoUser() {\r\n\t\tthis.ws = new WebSocket(\"ws://localhost:8000/ws/pedidoUser/\")\r\n\r\n\r\n\t\tthis.ws.onopen = evt => {\r\n\t\t\tthis.sendPedido();\r\n\t\t\tconsole.log(\"open\");\r\n\t\t};\r\n\r\n\t\tthis.ws.onclose = evt => {\r\n\t\t\tconsole.log('disconnected reloadiong')\r\n\t\t\t//if (Cookies.get('sessionid') != undefined) this.reloadPedidoUser()\r\n\t\t\tthis.reloadPedidoUser()\r\n\t\t};\r\n\r\n\t\tthis.ws.onmessage = evt => {\r\n\r\n\t\t\tconst message = JSON.parse(evt.data)\r\n\t\t\t// this.setState({ dataFromServer: message })\r\n\t\t\t\r\n\t\t\tthis.props.notificationManager(message);\r\n\t\t\tthis.addNFT(message);\r\n\t\t};\r\n\r\n\t\tthis.ws.onerror = evt => { console.log(JSON.stringify(evt)) };\r\n\t}\r\n\r\n\treloadPostUser(){\r\n\t\tthis.ws = new WebSocket(\"ws://localhost:8000/ws/socialUser/\")\r\n\r\n\t\tthis.ws.onopen = evt => {\r\n\t\t\tthis.sendPost();\r\n\t\t};\r\n\r\n\t\tthis.ws.onclose = evt => {\r\n\t\t\tconsole.log('disconnected reloadiong')\r\n\t\t\tif (Cookies.get('sessionid') != undefined) this.reloadPedidoUser()\r\n\t\t};\r\n\r\n\t\tthis.ws.onmessage = evt => {\r\n\t\t\tconst message = JSON.parse(evt.data)\r\n\t\t\t// this.setState({ dataFromServer: message })\r\n\t\t\t// console.log(message);\r\n\t\t\tthis.addNFT(message);\r\n\t\t};\r\n\r\n\t\tthis.ws.onerror = evt => { console.log(JSON.stringify(evt)) };\r\n\t}\r\n\r\n\tsendData=(e)=>{\r\n\r\n\t}\r\n\r\n\trender() {\r\n\t\tthis.sendData.bind(this);\r\n\t\treturn (\r\n\t\t\t<ReactNotification />\t\r\n\t\t);\r\n\t}\r\n}\r\n"]},"metadata":{},"sourceType":"module"}