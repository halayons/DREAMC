{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\joha\\\\Desktop\\\\dcake1\\\\DreamCakeFront\\\\src\\\\components\\\\social\\\\social.jsx\";\nimport './style.scss';\nimport React from 'react';\nimport { Feed } from './feed';\nimport { CreatePost } from './createPost';\nimport { Footer, Header } from '../landingPage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class Social extends React.Component {\n  constructor() {\n    super();\n    this.ws = new WebSocket(\"ws://localhost:8000/postWS/\");\n    this.attrs = {\n      1: \"likes\",\n      2: \"published_date\"\n    };\n    this.order = {\n      asc: \"\",\n      desc: \"-\"\n    };\n    this.state = {\n      attr: this.attrs[2],\n      count: 20,\n      order: this.order.desc,\n      posts: []\n    };\n    this.update = this.update.bind(this);\n  }\n\n  componentDidMount() {\n    this.loadPosts();\n\n    this.ws.onopen = evt => this.send();\n\n    this.ws.onclose = evt => window.location.reload();\n\n    this.ws.onmessage = evt => this.loadPosts();\n\n    this.ws.onerror = evt => console.log(JSON.stringify(evt));\n  }\n\n  loadPosts() {\n    fetch(\"http://localhost:8000/social/all_posts/\" + this.state.order + this.state.attr + \"/\" + this.state.count).then(response => response.json()).then(json => this.setState({\n      posts: json\n    })).catch(error => console.log(error));\n  }\n\n  update() {\n    this.loadPosts();\n  }\n\n  send() {\n    this.ws.send(JSON.stringify({\n      action: \"subscribe_to_post_activity\",\n      request_id: new Date().getTime()\n    }));\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(CreatePost, {\n        update: this.update\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Feed, {\n        posts: this.state.posts\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 4\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/joha/Desktop/dcake1/DreamCakeFront/src/components/social/social.jsx"],"names":["React","Feed","CreatePost","Footer","Header","Social","Component","constructor","ws","WebSocket","attrs","order","asc","desc","state","attr","count","posts","update","bind","componentDidMount","loadPosts","onopen","evt","send","onclose","window","location","reload","onmessage","onerror","console","log","JSON","stringify","fetch","then","response","json","setState","catch","error","action","request_id","Date","getTime","render"],"mappings":";AAAA,OAAO,cAAP;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,QAAqB,QAArB;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,MAAT,EAAiBC,MAAjB,QAA+B,gBAA/B;;AAGA,OAAO,MAAMC,MAAN,SAAqBL,KAAK,CAACM,SAA3B,CAAqC;AAI3CC,EAAAA,WAAW,GAAG;AACb;AADa,SAFdC,EAEc,GAFT,IAAIC,SAAJ,CAAc,6BAAd,CAES;AAGb,SAAKC,KAAL,GAAa;AACZ,SAAG,OADS;AAEZ,SAAG;AAFS,KAAb;AAKA,SAAKC,KAAL,GAAa;AACZC,MAAAA,GAAG,EAAE,EADO;AAEZC,MAAAA,IAAI,EAAE;AAFM,KAAb;AAKA,SAAKC,KAAL,GAAa;AACZC,MAAAA,IAAI,EAAE,KAAKL,KAAL,CAAW,CAAX,CADM;AAEZM,MAAAA,KAAK,EAAE,EAFK;AAGZL,MAAAA,KAAK,EAAE,KAAKA,KAAL,CAAWE,IAHN;AAIZI,MAAAA,KAAK,EAAE;AAJK,KAAb;AAOA,SAAKC,MAAL,GAAc,KAAKA,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAd;AACA;;AAEDC,EAAAA,iBAAiB,GAAG;AACnB,SAAKC,SAAL;;AAEA,SAAKb,EAAL,CAAQc,MAAR,GAAiBC,GAAG,IAAI,KAAKC,IAAL,EAAxB;;AACA,SAAKhB,EAAL,CAAQiB,OAAR,GAAkBF,GAAG,IAAIG,MAAM,CAACC,QAAP,CAAgBC,MAAhB,EAAzB;;AACA,SAAKpB,EAAL,CAAQqB,SAAR,GAAoBN,GAAG,IAAI,KAAKF,SAAL,EAA3B;;AACA,SAAKb,EAAL,CAAQsB,OAAR,GAAkBP,GAAG,IAAIQ,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,SAAL,CAAeX,GAAf,CAAZ,CAAzB;AACA;;AAEDF,EAAAA,SAAS,GAAG;AACXc,IAAAA,KAAK,CAAC,4CAA4C,KAAKrB,KAAL,CAAWH,KAAvD,GAA+D,KAAKG,KAAL,CAAWC,IAA1E,GAAiF,GAAjF,GAAuF,KAAKD,KAAL,CAAWE,KAAnG,CAAL,CACEoB,IADF,CACOC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADnB,EAEEF,IAFF,CAEOE,IAAI,IAAI,KAAKC,QAAL,CAAc;AAC3BtB,MAAAA,KAAK,EAAEqB;AADoB,KAAd,CAFf,EAKEE,KALF,CAKQC,KAAK,IAAIV,OAAO,CAACC,GAAR,CAAYS,KAAZ,CALjB;AAMA;;AAEDvB,EAAAA,MAAM,GAAG;AACR,SAAKG,SAAL;AACA;;AAEDG,EAAAA,IAAI,GAAE;AACL,SAAKhB,EAAL,CAAQgB,IAAR,CAAaS,IAAI,CAACC,SAAL,CAAe;AAC3BQ,MAAAA,MAAM,EAAE,4BADmB;AAE3BC,MAAAA,UAAU,EAAE,IAAIC,IAAJ,GAAWC,OAAX;AAFe,KAAf,CAAb;AAIA;;AAEDC,EAAAA,MAAM,GAAG;AAER,wBACC;AAAA,8BACC,QAAC,UAAD;AAAY,QAAA,MAAM,EAAE,KAAK5B;AAAzB;AAAA;AAAA;AAAA;AAAA,cADD,eAEC,QAAC,IAAD;AAAM,QAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWG;AAAxB;AAAA;AAAA;AAAA;AAAA,cAFD;AAAA;AAAA;AAAA;AAAA;AAAA,YADD;AAMA;;AAhE0C","sourcesContent":["import './style.scss';\r\nimport React from 'react';\r\nimport { Feed } from './feed';\r\nimport { CreatePost } from './createPost';\r\nimport { Footer, Header } from '../landingPage';\r\n\r\n\r\nexport class Social extends React.Component {\r\n\r\n\tws = new WebSocket(\"ws://localhost:8000/postWS/\")\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.attrs = {\r\n\t\t\t1: \"likes\",\r\n\t\t\t2: \"published_date\",\r\n\t\t}\r\n\r\n\t\tthis.order = {\r\n\t\t\tasc: \"\",\r\n\t\t\tdesc: \"-\"\r\n\t\t}\r\n\r\n\t\tthis.state = {\r\n\t\t\tattr: this.attrs[2],\r\n\t\t\tcount: 20,\r\n\t\t\torder: this.order.desc,\r\n\t\t\tposts: []\r\n\t\t};\r\n\r\n\t\tthis.update = this.update.bind(this)\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.loadPosts()\r\n\r\n\t\tthis.ws.onopen = evt => this.send(); \r\n\t\tthis.ws.onclose = evt => window.location.reload(); \r\n\t\tthis.ws.onmessage = evt => this.loadPosts();\r\n\t\tthis.ws.onerror = evt => console.log(JSON.stringify(evt)); \r\n\t}\r\n\r\n\tloadPosts() {\r\n\t\tfetch(\"http://localhost:8000/social/all_posts/\" + this.state.order + this.state.attr + \"/\" + this.state.count)\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(json => this.setState({\r\n\t\t\t\tposts: json\r\n\t\t\t}))\r\n\t\t\t.catch(error => console.log(error));\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tthis.loadPosts()\r\n\t}\r\n\r\n\tsend(){\r\n\t\tthis.ws.send(JSON.stringify({\r\n\t\t\taction: \"subscribe_to_post_activity\",\r\n\t\t\trequest_id: new Date().getTime(),\r\n\t\t}))\r\n\t}\r\n\r\n\trender() {\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<CreatePost update={this.update} />\r\n\t\t\t\t<Feed posts={this.state.posts} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}