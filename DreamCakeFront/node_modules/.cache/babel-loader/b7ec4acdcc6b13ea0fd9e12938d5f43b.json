{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\joha\\\\Desktop\\\\dcake1\\\\DreamCakeFront\\\\src\\\\components\\\\administracion\\\\pedidos\\\\pedidos.jsx\";\nimport '../style.scss';\nimport React from 'react';\nimport { Estado } from './estado';\nimport { PedidosNav } from './pedidosNav';\nimport 'react-bootstrap-table/dist/react-bootstrap-table.min.css';\nimport 'react-bootstrap-table2-paginator/dist/react-bootstrap-table2-paginator.min.css';\nimport { BootstrapTable, TableHeaderColumn } from 'react-bootstrap-table';\nimport { Detallep } from './detallep';\nimport Cookies from 'js-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class Pedidos extends React.Component {\n  constructor(props) {\n    super(props);\n    this.estados = [{\n      value: '0',\n      text: 'En Proceso'\n    }, {\n      value: '1',\n      text: 'Enviado'\n    }, {\n      value: '2',\n      text: 'Entregado'\n    }, {\n      value: '4',\n      text: 'Cancelado'\n    }];\n    this.acpt = [{\n      value: true,\n      text: 'Aceptado'\n    }, {\n      value: false,\n      text: 'No aceptado'\n    }];\n\n    this.openModal = e => {\n      e.preventDefault();\n      this.setState({\n        open: !this.state.open\n      });\n    };\n\n    this.parseDate = s => {};\n\n    this.state = {\n      open: true,\n      value: \" \",\n      sortName: undefined,\n      sortOrder: undefined,\n      current: \"\"\n    };\n    this.buttonFormatter = this.buttonFormatter.bind(this);\n    this.stateFromatter = this.stateFromatter.bind(this);\n    this.openModal = this.openModal.bind(this);\n    this.onSortChange = this.onSortChange.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.estadoFormatter = this.estadoFormatter.bind(this);\n    this.aceptadoFormatter = this.aceptadoFormatter.bind(this);\n    this.onAfterSaveCell = this.onAfterSaveCell.bind(this);\n    this.replaceModalItem = this.replaceModalItem.bind(this);\n    this.updateRow = this.updateRow.bind(this);\n  }\n\n  handleChange(event) {\n    console.log(event.tar);\n    this.setState({\n      value: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    alert('Esta seguro?: ' + this.state.value);\n  }\n\n  replaceModalItem(index) {\n    this.setState({\n      requiredItem: index\n    });\n  }\n\n  buttonFormatter(cell, row) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        button: true,\n        type: \"button\",\n        className: \"col-lg-6 col-sm6 col-6 btn btn-register \",\n        \"data-dismiss\": \"modal\",\n        \"data-toggle\": \"modal\",\n        \"data-target\": '#' + 'a' + row.idpedido,\n        children: \"ver\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Detallep, {\n        row: row\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 4\n    }, this);\n  }\n\n  updateRow(event) {\n    this.setState({\n      current: parseInt(event.target.idpedido)\n    }); // for (let i = 0; i < this.props.datos; i++)\n    // \tif (this.props.datos[i].idpedido == parseInt(event.target.idpedido)){\n    // \t\tconsole.log(this.props.datos[i])\n    // \t\tthis.setState({ current: this.props.datos[i] })\n    // \t}\n  }\n\n  buttonSelect(cell, row) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"select\", {\n        onChange: this.handleChange,\n        value: row.estado % 3,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: 0,\n          children: \"En proceso\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 1,\n          children: \"Enviado\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 2,\n          children: \"Entregado\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 4\n    }, this);\n  }\n\n  stateFromatter(cell, row) {\n    return /*#__PURE__*/_jsxDEV(Estado, {\n      datos: row\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 10\n    }, this);\n  }\n\n  onSortChange(sortName, sortOrder) {\n    this.setState({\n      sortName,\n      sortOrder\n    });\n  }\n\n  dateFormatter(cell, row) {\n    let s = cell;\n    let months = {\n      jan: 0,\n      feb: 1,\n      mar: 2,\n      apr: 3,\n      may: 4,\n      jun: 5,\n      jul: 6,\n      aug: 7,\n      sep: 8,\n      oct: 9,\n      nov: 10,\n      dec: 11\n    };\n    let p = s.split('-');\n    let date = new Date(p[0], months[p[1].toLowerCase()], p[2]);\n    return `${('0' + (date.getMonth() + 1)).slice(-2)}/${('0' + (date.getDate() - 1)).slice(-2)}/${date.getFullYear()}`;\n  }\n\n  estadoFormatter(cell, row) {\n    let estados = ['En proceso', 'Enviado', 'Entregado', 'Cancelado'];\n    return estados[row.estado];\n  }\n\n  aceptadoFormatter(cell, row) {\n    return row.aceptado ? 'Aceptado' : 'No aceptado';\n  }\n\n  onAfterSaveCell(row, cellName, cellValue) {\n    // alert(`Save cell ${cellName} with value ${cellValue} id ${row.idpedido}`);\n    if (cellName == 'aceptado') this.aceptarPedido(row.idpedido, cellValue);\n    if (cellName == 'estado') this.estadoPedido(row.idpedido, cellValue); // if(cellName == 'aceptado') this.aceptarPedido\n  }\n\n  aceptarPedido(id, valor) {\n    const requestOptions = {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-CSRFToken': Cookies.get('csrftoken')\n      },\n      credentials: \"include\",\n      body: JSON.stringify({\n        'aceptado': valor\n      })\n    };\n    fetch(\"http://localhost:8000/aceptar_pedido/\" + id + \"/\", requestOptions).then(response => response.json()).then(json => {\n      if (json.hasOwnProperty('aceptado')) alert(`Pedido ${id} aceptado`);\n    }).catch(error => console.log(error));\n  }\n\n  estadoPedido(id, valor) {\n    const requestOptions = {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-CSRFToken': Cookies.get('csrftoken')\n      },\n      credentials: \"include\",\n      body: JSON.stringify({\n        'estado': valor\n      })\n    };\n    fetch(\"http://localhost:8000/estado_pedido/\" + id + \"/\", requestOptions).then(response => response.json()).then(json => console.log(json)).catch(error => console.log(error));\n  }\n\n  render() {\n    const pagination = {\n      page: 2,\n      sizePerPage: 5,\n      lastPageText: '>>',\n      firstPageText: '<<',\n      nextPageText: '>',\n      prePageText: '<',\n      showTotal: true,\n      alwaysShowAllBtns: true,\n      onPageChange: function (page, sizePerPage) {\n        console.log('page', page);\n        console.log('sizePerPage', sizePerPage);\n      },\n      onSizePerPageChange: function (page, sizePerPage) {\n        console.log('page', page);\n        console.log('sizePerPage', sizePerPage);\n      }\n    };\n    const options = {\n      sortName: this.state.sortName,\n      sortOrder: this.state.sortOrder,\n      onSortChange: this.onSortChange\n    };\n    let table = \"no hay datos\";\n\n    if (this.props.datos.length > 0) {\n      table = /*#__PURE__*/_jsxDEV(BootstrapTable, {\n        pagination: pagination,\n        data: this.props.datos,\n        options: options,\n        cellEdit: {\n          mode: 'click',\n          blurToSave: true,\n          afterSaveCell: this.onAfterSaveCell\n        },\n        children: [/*#__PURE__*/_jsxDEV(TableHeaderColumn, {\n          isKey: true,\n          dataField: \"idpedido\",\n          dataSort: true,\n          filter: {\n            type: 'TextFilter',\n            delay: 200\n          },\n          children: \"ID\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(TableHeaderColumn, {\n          dataField: \"fecha_pedido\",\n          dataSort: true,\n          dataFormat: this.dateFormatter,\n          editable: false,\n          children: \"Fecha\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(TableHeaderColumn, {\n          dataField: \"user\",\n          dataSort: true,\n          filter: {\n            type: 'TextFilter',\n            delay: 200\n          },\n          editable: false,\n          children: \"Usuario\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(TableHeaderColumn, {\n          dataField: \"aceptado\",\n          dataSort: true,\n          filter: {\n            type: 'TextFilter',\n            delay: 200\n          },\n          dataFormat: this.aceptadoFormatter,\n          editable: {\n            type: 'select',\n            options: {\n              values: this.acpt\n            }\n          },\n          children: \"Aceptado\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(TableHeaderColumn, {\n          dataField: \"button\",\n          dataFormat: this.buttonFormatter,\n          editable: false,\n          children: \"Ver\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(TableHeaderColumn, {\n          dataField: \"estado\",\n          dataFormat: this.estadoFormatter,\n          editable: {\n            type: 'select',\n            options: {\n              values: this.estados\n            }\n          },\n          children: \"Editar Estado\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 5\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: table\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 4\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/joha/Desktop/dcake1/DreamCakeFront/src/components/administracion/pedidos/pedidos.jsx"],"names":["React","Estado","PedidosNav","BootstrapTable","TableHeaderColumn","Detallep","Cookies","Pedidos","Component","constructor","props","estados","value","text","acpt","openModal","e","preventDefault","setState","open","state","parseDate","s","sortName","undefined","sortOrder","current","buttonFormatter","bind","stateFromatter","onSortChange","handleChange","handleSubmit","estadoFormatter","aceptadoFormatter","onAfterSaveCell","replaceModalItem","updateRow","event","console","log","tar","target","alert","index","requiredItem","cell","row","idpedido","parseInt","buttonSelect","estado","dateFormatter","months","jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec","p","split","date","Date","toLowerCase","getMonth","slice","getDate","getFullYear","aceptado","cellName","cellValue","aceptarPedido","estadoPedido","id","valor","requestOptions","method","headers","get","credentials","body","JSON","stringify","fetch","then","response","json","hasOwnProperty","catch","error","render","pagination","page","sizePerPage","lastPageText","firstPageText","nextPageText","prePageText","showTotal","alwaysShowAllBtns","onPageChange","onSizePerPageChange","options","table","datos","length","mode","blurToSave","afterSaveCell","type","delay","values"],"mappings":"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","sourcesContent":["import '../style.scss';\r\nimport React from 'react';\r\nimport { Estado } from './estado';\r\nimport { PedidosNav } from './pedidosNav';\r\nimport 'react-bootstrap-table/dist/react-bootstrap-table.min.css';\r\nimport 'react-bootstrap-table2-paginator/dist/react-bootstrap-table2-paginator.min.css';\r\nimport { BootstrapTable, TableHeaderColumn } from 'react-bootstrap-table';\r\nimport { Detallep } from './detallep';\r\n\r\nimport Cookies from 'js-cookie';\r\n\r\n\r\nexport class Pedidos extends React.Component {\r\n\testados = [{\r\n\t\tvalue: '0',\r\n\t\ttext: 'En Proceso'\r\n\t}, {\r\n\t\tvalue: '1',\r\n\t\ttext: 'Enviado'\r\n\t}, {\r\n\t\tvalue: '2',\r\n\t\ttext: 'Entregado',\r\n\t}, {\r\n\t\tvalue: '4',\r\n\t\ttext: 'Cancelado'\r\n\t}]\r\n\r\n\tacpt = [{\r\n\t\tvalue: true,\r\n\t\ttext: 'Aceptado'\r\n\t},\r\n\t{\r\n\t\tvalue: false,\r\n\t\ttext: 'No aceptado'\r\n\t}]\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\topen: true,\r\n\t\t\tvalue: \" \",\r\n\t\t\tsortName: undefined,\r\n\t\t\tsortOrder: undefined,\r\n\t\t\tcurrent: \"\"\r\n\t\t}\r\n\r\n\t\tthis.buttonFormatter = this.buttonFormatter.bind(this);\r\n\t\tthis.stateFromatter = this.stateFromatter.bind(this);\r\n\t\tthis.openModal = this.openModal.bind(this);\r\n\t\tthis.onSortChange = this.onSortChange.bind(this);\r\n\t\tthis.handleChange = this.handleChange.bind(this);\r\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\r\n\t\tthis.estadoFormatter = this.estadoFormatter.bind(this)\r\n\t\tthis.aceptadoFormatter = this.aceptadoFormatter.bind(this);\r\n\t\tthis.onAfterSaveCell = this.onAfterSaveCell.bind(this);\r\n\t\tthis.replaceModalItem = this.replaceModalItem.bind(this);\r\n\t\tthis.updateRow = this.updateRow.bind(this);\r\n\t}\r\n\r\n\thandleChange(event) {\r\n\t\tconsole.log(event.tar)\r\n\t\tthis.setState({ value: event.target.value });\r\n\t}\r\n\r\n\thandleSubmit(event) {\r\n\t\tevent.preventDefault();\r\n\t\talert('Esta seguro?: ' + this.state.value);\r\n\r\n\t}\r\n\treplaceModalItem(index) {\r\n\t\tthis.setState({\r\n\t\t\trequiredItem: index\r\n\t\t});\r\n\t}\r\n\r\n\tbuttonFormatter(cell, row) {\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<button button type=\"button\" className=\"col-lg-6 col-sm6 col-6 btn btn-register \" data-dismiss=\"modal\" data-toggle=\"modal\" data-target={'#'+'a' + row.idpedido}>ver</button>\r\n\t\t\t\t<Detallep row = {row}></Detallep>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tupdateRow(event) {\r\n\t\tthis.setState({current: parseInt(event.target.idpedido)})\r\n\t\t// for (let i = 0; i < this.props.datos; i++)\r\n\t\t// \tif (this.props.datos[i].idpedido == parseInt(event.target.idpedido)){\r\n\t\t// \t\tconsole.log(this.props.datos[i])\r\n\t\t// \t\tthis.setState({ current: this.props.datos[i] })\r\n\t\t// \t}\r\n\t}\r\n\r\n\tbuttonSelect(cell, row) {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<select onChange={this.handleChange} value={row.estado % 3}>\r\n\t\t\t\t\t<option value={0}>En proceso</option>\r\n\t\t\t\t\t<option value={1}>Enviado</option>\r\n\t\t\t\t\t<option value={2}>Entregado</option>\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\r\n\topenModal = (e) => {\r\n\t\te.preventDefault();\r\n\t\tthis.setState({\r\n\t\t\topen: !this.state.open\r\n\t\t});\r\n\t};\r\n\r\n\tstateFromatter(cell, row) {\r\n\t\treturn <Estado datos={row}></Estado>\r\n\t}\r\n\r\n\tonSortChange(sortName, sortOrder) {\r\n\t\tthis.setState({\r\n\t\t\tsortName,\r\n\t\t\tsortOrder\r\n\t\t});\r\n\t}\r\n\r\n\tparseDate = (s) => {\r\n\r\n\t}\r\n\r\n\tdateFormatter(cell, row) {\r\n\t\tlet s = cell;\r\n\r\n\t\tlet months = {\r\n\t\t\tjan: 0, feb: 1, mar: 2, apr: 3, may: 4, jun: 5,\r\n\t\t\tjul: 6, aug: 7, sep: 8, oct: 9, nov: 10, dec: 11\r\n\t\t};\r\n\t\tlet p = s.split('-');\r\n\t\tlet date = new Date(p[0], months[p[1].toLowerCase()], p[2]);\r\n\t\treturn `${('0' + (date.getMonth() + 1)).slice(-2)}/${('0' + (date.getDate() - 1)).slice(-2)}/${date.getFullYear()}`;\r\n\t}\r\n\r\n\testadoFormatter(cell, row) {\r\n\t\tlet estados = ['En proceso', 'Enviado', 'Entregado', 'Cancelado'];\r\n\t\treturn estados[row.estado]\r\n\t}\r\n\r\n\taceptadoFormatter(cell, row) {\r\n\t\treturn row.aceptado ? 'Aceptado' : 'No aceptado'\r\n\t}\r\n\r\n\r\n\tonAfterSaveCell(row, cellName, cellValue) {\r\n\t\t// alert(`Save cell ${cellName} with value ${cellValue} id ${row.idpedido}`);\r\n\t\tif (cellName == 'aceptado') this.aceptarPedido(row.idpedido, cellValue)\r\n\t\tif (cellName == 'estado') this.estadoPedido(row.idpedido, cellValue)\r\n\t\t// if(cellName == 'aceptado') this.aceptarPedido\r\n\t}\r\n\r\n\taceptarPedido(id, valor) {\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'PUT',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'X-CSRFToken': Cookies.get('csrftoken')\r\n\t\t\t},\r\n\t\t\tcredentials: \"include\",\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\t'aceptado': valor\r\n\t\t\t})\r\n\t\t};\r\n\t\tfetch(\"http://localhost:8000/aceptar_pedido/\" + id + \"/\", requestOptions)\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(json => {\r\n\t\t\t\tif (json.hasOwnProperty('aceptado'))\r\n\t\t\t\t\talert(`Pedido ${id} aceptado`)\r\n\t\t\t})\r\n\t\t\t.catch(error => console.log(error));\r\n\t}\r\n\r\n\testadoPedido(id, valor) {\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'PUT',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'X-CSRFToken': Cookies.get('csrftoken')\r\n\t\t\t},\r\n\t\t\tcredentials: \"include\",\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\t'estado': valor\r\n\t\t\t})\r\n\t\t};\r\n\t\tfetch(\"http://localhost:8000/estado_pedido/\" + id + \"/\", requestOptions)\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(json => console.log(json))\r\n\t\t\t.catch(error => console.log(error));\r\n\t}\r\n\r\n\r\n\r\n\trender() {\r\n\t\tconst pagination = {\r\n\t\t\tpage: 2,\r\n\t\t\tsizePerPage: 5,\r\n\t\t\tlastPageText: '>>',\r\n\t\t\tfirstPageText: '<<',\r\n\t\t\tnextPageText: '>',\r\n\t\t\tprePageText: '<',\r\n\t\t\tshowTotal: true,\r\n\t\t\talwaysShowAllBtns: true,\r\n\t\t\tonPageChange: function (page, sizePerPage) {\r\n\t\t\t\tconsole.log('page', page);\r\n\t\t\t\tconsole.log('sizePerPage', sizePerPage);\r\n\t\t\t},\r\n\t\t\tonSizePerPageChange: function (page, sizePerPage) {\r\n\t\t\t\tconsole.log('page', page);\r\n\t\t\t\tconsole.log('sizePerPage', sizePerPage);\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst options = {\r\n\t\t\tsortName: this.state.sortName,\r\n\t\t\tsortOrder: this.state.sortOrder,\r\n\t\t\tonSortChange: this.onSortChange\r\n\t\t};\r\n\r\n\t\tlet table = \"no hay datos\"\r\n\r\n\t\tif (this.props.datos.length > 0) {\r\n\t\t\ttable = (\r\n\t\t\t\t<BootstrapTable pagination={pagination} data={this.props.datos} options={options} cellEdit={{ mode: 'click', blurToSave: true, afterSaveCell: this.onAfterSaveCell }}>\r\n\t\t\t\t\t<TableHeaderColumn isKey dataField='idpedido' dataSort={true} filter={{ type: 'TextFilter', delay: 200 }} >\r\n\t\t\t\t\t\tID\r\n\t\t\t\t\t</TableHeaderColumn>\r\n\t\t\t\t\t<TableHeaderColumn dataField='fecha_pedido' dataSort={true} dataFormat={this.dateFormatter} editable={false} >\r\n\t\t\t\t\t\tFecha\r\n\t\t\t\t\t</TableHeaderColumn>\r\n\t\t\t\t\t<TableHeaderColumn dataField='user' dataSort={true} filter={{ type: 'TextFilter', delay: 200 }} editable={false}>\r\n\t\t\t\t\t\tUsuario\r\n\t\t\t\t\t</TableHeaderColumn>\r\n\t\t\t\t\t<TableHeaderColumn dataField='aceptado' dataSort={true} filter={{ type: 'TextFilter', delay: 200 }} dataFormat={this.aceptadoFormatter}\r\n\t\t\t\t\t\teditable={{ type: 'select', options: { values: this.acpt } }}>\r\n\t\t\t\t\t\tAceptado\r\n\t\t\t\t\t</TableHeaderColumn>\r\n\t\t\t\t\t<TableHeaderColumn dataField='button' dataFormat={this.buttonFormatter} editable={false}>\r\n\t\t\t\t\t\tVer\r\n\t\t\t\t\t</TableHeaderColumn>\r\n\t\t\t\t\t<TableHeaderColumn dataField='estado' dataFormat={this.estadoFormatter} editable={{ type: 'select', options: { values: this.estados } }}>\r\n\t\t\t\t\t\tEditar Estado\r\n\t\t\t\t\t</TableHeaderColumn>\r\n\t\t\t\t</BootstrapTable>\r\n\r\n\t\t\t)\r\n\t\t}\r\n\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{table}\r\n\t\t\t\t{/* <Detallep datos={this.props.datos} current={this.state.current} /> */}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}