{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\joha\\\\Desktop\\\\dcake1\\\\DreamCakeFront\\\\src\\\\components\\\\social\\\\createPost.jsx\";\nimport './style.scss';\nimport foto from '../../static/images/foto1.png';\nimport React from 'react';\nimport Cookies from 'js-cookie';\nimport { Pastel, PastelC } from '../Pedidos/Pedidos';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class CreatePost extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      pasteles: [],\n      file: '',\n      imagePreviewUrl: '',\n      option: '',\n      cakePaint: undefined\n    };\n    this.handleImageChange = this.handleImageChange.bind(this);\n    this.handleSelect = this.handleSelect.bind(this);\n    this.crearPost = this.crearPost.bind(this);\n  }\n\n  componentDidMount() {\n    this.getCakes();\n  }\n\n  crearPost(e) {\n    let form_data = new FormData();\n    form_data.append('foto', this.state.file);\n    form_data.append('likes', 0);\n    form_data.append('status', true);\n    form_data.append('reported', false);\n    form_data.append('pastel', this.state.option);\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'X-CSRFToken': Cookies.get('csrftoken')\n      },\n      credentials: \"include\",\n      body: form_data\n    };\n    fetch('http://localhost:8000/social/create_post/', requestOptions).then(res => res.json()).then(json => {\n      this.props.update();\n      console.log('Post creado\\n' + json);\n    }).catch(error => console.log(error));\n  }\n\n  handleSelect(e) {\n    let i = e.target.value;\n    this.setState({\n      cakePaint: this.state.pasteles[i],\n      option: i\n    }); //desplegar pastel\n\n    /* let activar = document.getElementById('post-collapse');\r\n    let btnCancelar = document.getElementById('btn-cancelar');\r\n    console.log(activar.hidden)\r\n    activar.hidden=false;\r\n     */\n  }\n\n  handleImageChange(e) {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    reader.onloadend = () => {\n      this.setState({\n        file: file,\n        imagePreviewUrl: reader.result\n      });\n    };\n\n    reader.readAsDataURL(file);\n  }\n\n  getCakes() {\n    const requestOptions = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-CSRFToken': Cookies.get('csrftoken')\n      },\n      credentials: \"include\"\n    };\n    fetch('http://localhost:8000/pasteles/', requestOptions).then(res => res.json()).then(json => {\n      this.setState({\n        pasteles: json\n      });\n    }).catch(error => console.log(error));\n  }\n\n  paintCakes(p) {\n    //masa[CH,VA,TL,RV]\n    //relleno[AQ,NU,ML,CP]\n    let masa = ['url(\"https://www.transparenttextures.com/patterns/45-degree-fabric-dark.png\")', 'url(\"https://www.transparenttextures.com/patterns/asfalt-dark.png\")', 'url(\"https://www.transparenttextures.com/patterns/ravenna.png\")', 'url(\"https://www.transparenttextures.com/patterns/crisp-paper-ruffles.png\")'];\n    let relleno = [\"#995c2e\", \"#69391d\", \"#5c0c15b5\", \"#e4cc8ba1\"];\n    if (p.masa == 'CH') masa = masa[0];\n    if (p.masa == 'VA') masa = masa[1];\n    if (p.masa == 'TL') masa = masa[2];\n    if (p.masa == 'RV') masa = masa[3];\n    if (p.relleno == 'AQ') relleno = relleno[0];\n    if (p.relleno == 'NU') relleno = relleno[1];\n    if (p.relleno == 'ML') relleno = relleno[2];\n    if (p.relleno == 'CP') relleno = relleno[3];\n    document.documentElement.style.setProperty('--color-pastel2', relleno);\n    document.documentElement.style.setProperty('--textura-pastel', masa);\n\n    if (p.cobertura == 'FD') {\n      document.documentElement.style.setProperty('--color-pastel', p.color);\n      document.documentElement.style.setProperty('--textura-pastel2', '');\n    }\n\n    if (p.cobertura == 'CR') {\n      document.documentElement.style.setProperty('--color-pastel', '#eee8c9');\n      document.documentElement.style.setProperty('--textura-pastel2', \"url(http://www.transparenttextures.com/patterns/zig-zag.png)\");\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \".about-dreamCake\",\n      children: p.forma == 'CI' ? /*#__PURE__*/_jsxDEV(Pastel, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(PastelC, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 41\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 4\n    }, this);\n  }\n\n  countCakes(p) {\n    return p.map(e => /*#__PURE__*/_jsxDEV(\"option\", {\n      type: \"bottom\",\n      children: p.indexOf(e)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }, this));\n  }\n\n  render() {\n    let {\n      imagePreviewUrl\n    } = this.state;\n    let $imagePreview = null;\n\n    if (imagePreviewUrl) {\n      $imagePreview = /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"img-fluid shadow-lg \",\n        style: {\n          margin: \"auto\"\n        },\n        src: imagePreviewUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 21\n      }, this);\n    }\n\n    if (this.state.pasteles.length > 0) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"crearPost justify-content-start\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-lg-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-principal \",\n            type: \"button\",\n            \"data-toggle\": \"collapse\",\n            \"data-target\": \"#form-post\",\n            \"aria-expanded\": \"false\",\n            \"aria-controls\": \"\",\n            children: \"+ Postear pedido\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-post collapse multi-collapse \",\n            id: \"form-post\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form col-sm-12 col-lg-12\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-row \",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"imgfile\",\n                  type: \"file\",\n                  onChange: this.handleImageChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"imgfile\",\n                  className: \" btn-secundario  justify-content-between\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    className: \"foto\",\n                    src: foto\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 172,\n                    columnNumber: 11\n                  }, this), \"Escoger foto\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 10\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"pastelID\",\n                  className: \"\",\n                  children: \"Escoja la ID de su pastel:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 12\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  className: \"form-control \",\n                  id: \"pastelID\",\n                  value: this.state.option,\n                  placeholder: \"h\",\n                  onChange: this.handleSelect,\n                  children: this.countCakes(this.state.pasteles)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 12\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"data-post collapse multi-collapse  justify-content-center\",\n            id: \"form-post\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: this.state.cakePaint != undefined ? this.paintCakes(this.state.cakePaint) : ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-principal btn-mini\",\n              type: \"button\",\n              onClick: this.crearPost,\n              children: \"Postear\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-secundario btn-mini\",\n              type: \"button\",\n              \"data-toggle\": \"collapse\",\n              id: \"btn-cancelar\",\n              \"data-target\": \"#form-post\",\n              \"aria-expanded\": \"false\",\n              \"aria-controls\": \"\",\n              children: \"Cancelar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/crearPastel/\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-secundario\",\n              type: \"button\",\n              children: \"+ Crear pedido\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 31\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 5\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-lg-3  card-body justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-wrap\",\n          for: \"pedido\",\n          onClick: this.getCakes,\n          children: [\"Aun no tienes ningun pedido, empieza ahora!!\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"crearPastel/\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-secundario\",\n              id: \"pedido\",\n              children: \"Crear Pedido\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 5\n      }, this);\n    }\n  }\n\n}","map":{"version":3,"sources":["C:/Users/joha/Desktop/dcake1/DreamCakeFront/src/components/social/createPost.jsx"],"names":["foto","React","Cookies","Pastel","PastelC","CreatePost","Component","constructor","props","state","pasteles","file","imagePreviewUrl","option","cakePaint","undefined","handleImageChange","bind","handleSelect","crearPost","componentDidMount","getCakes","e","form_data","FormData","append","requestOptions","method","headers","get","credentials","body","fetch","then","res","json","update","console","log","catch","error","i","target","value","setState","preventDefault","reader","FileReader","files","onloadend","result","readAsDataURL","paintCakes","p","masa","relleno","document","documentElement","style","setProperty","cobertura","color","forma","countCakes","map","indexOf","render","$imagePreview","margin","length"],"mappings":"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","sourcesContent":["import './style.scss';\r\nimport foto from '../../static/images/foto1.png';\r\nimport React from 'react';\r\nimport Cookies from 'js-cookie';\r\nimport {Pastel,PastelC} from '../Pedidos/Pedidos'\r\n\r\nexport class CreatePost extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tpasteles: [],\r\n\t\t\tfile: '',\r\n\t\t\timagePreviewUrl: '',\r\n\t\t\toption: '',\r\n\t\t\tcakePaint:undefined\r\n\t\t};\r\n\r\n\t\tthis.handleImageChange = this.handleImageChange.bind(this);\r\n\t\tthis.handleSelect = this.handleSelect.bind(this);\r\n\t\tthis.crearPost = this.crearPost.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.getCakes();\r\n\t}\r\n\r\n\tcrearPost(e) {\r\n\t\tlet form_data = new FormData()\r\n\t\tform_data.append('foto', this.state.file)\r\n\t\tform_data.append('likes', 0)\r\n\t\tform_data.append('status', true)\r\n\t\tform_data.append('reported', false)\r\n\t\tform_data.append('pastel', this.state.option)\r\n\r\n\t\tconst requestOptions = {\r\n            method: 'POST',\r\n            headers: { \r\n\t\t\t\t'X-CSRFToken':Cookies.get('csrftoken')\r\n\t\t\t},\r\n            credentials: \"include\",\r\n            body: form_data\r\n        };\r\n\r\n\t\tfetch('http://localhost:8000/social/create_post/', requestOptions)\r\n        .then(res => res.json())\r\n        .then(json => {\r\n\t\t\tthis.props.update()\r\n\t\t\tconsole.log('Post creado\\n' + json)\r\n        })\r\n        .catch(error => console.log(error))   \r\n\r\n\t\t\r\n\t}\r\n\r\n\thandleSelect(e) {\r\n\t\tlet i =e.target.value;\r\n        this.setState({\r\n            cakePaint: this.state.pasteles[i],\r\n\t\t\toption:i\r\n        })\r\n\t\t//desplegar pastel\r\n\t\t/* let activar = document.getElementById('post-collapse');\r\n\t\tlet btnCancelar = document.getElementById('btn-cancelar');\r\n\t\tconsole.log(activar.hidden)\r\n\t\tactivar.hidden=false;\r\n\t\t */\r\n\t\r\n    }\r\n\r\n\thandleImageChange(e) {\r\n\t\te.preventDefault();\r\n\r\n\t\tlet reader = new FileReader();\r\n\t\tlet file = e.target.files[0];\r\n\r\n\t\treader.onloadend = () => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tfile: file,\r\n\t\t\t\timagePreviewUrl: reader.result,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treader.readAsDataURL(file)\r\n\t\t\r\n\t}\r\n\r\n\tgetCakes() {\r\n\t\t\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'X-CSRFToken': Cookies.get('csrftoken')\r\n\t\t\t},\r\n\t\t\tcredentials: \"include\"\r\n\t\t};\r\n\r\n\t\tfetch('http://localhost:8000/pasteles/', requestOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(json => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tpasteles: json\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch(error => console.log(error))\r\n\t}\r\n\t\r\n\tpaintCakes(p){\r\n\t\t\r\n\t\t//masa[CH,VA,TL,RV]\r\n\t\t//relleno[AQ,NU,ML,CP]\r\n\t\tlet masa=['url(\"https://www.transparenttextures.com/patterns/45-degree-fabric-dark.png\")', 'url(\"https://www.transparenttextures.com/patterns/asfalt-dark.png\")','url(\"https://www.transparenttextures.com/patterns/ravenna.png\")','url(\"https://www.transparenttextures.com/patterns/crisp-paper-ruffles.png\")']\r\n\t\tlet relleno=[\"#995c2e\",\"#69391d\",\"#5c0c15b5\", \"#e4cc8ba1\"]\r\n\r\n\t\tif(p.masa=='CH') masa=masa[0]\r\n\t\tif(p.masa=='VA') masa=masa[1]\r\n\t\tif(p.masa=='TL') masa=masa[2]\r\n\t\tif(p.masa=='RV') masa=masa[3]\r\n\t\t\r\n\t\tif(p.relleno=='AQ') relleno=relleno[0]\r\n\t\tif(p.relleno=='NU') relleno=relleno[1]\r\n\t\tif(p.relleno=='ML') relleno=relleno[2]\r\n\t\tif(p.relleno=='CP') relleno=relleno[3]\r\n\r\n\t\t\r\n        document.documentElement.style.setProperty('--color-pastel2',relleno);\r\n\t\tdocument.documentElement.style.setProperty('--textura-pastel',masa);\r\n\r\n\t\tif(p.cobertura =='FD') { \r\n\t\t\tdocument.documentElement.style.setProperty('--color-pastel',p.color);\r\n\t\t\tdocument.documentElement.style.setProperty('--textura-pastel2','');}\r\n\t\tif(p.cobertura=='CR') {\r\n\t\t\tdocument.documentElement.style.setProperty('--color-pastel','#eee8c9');\r\n\t\t\tdocument.documentElement.style.setProperty('--textura-pastel2',\"url(http://www.transparenttextures.com/patterns/zig-zag.png)\");}\r\n\t\t\r\n\t\treturn(\r\n\t\t\t<div className=\".about-dreamCake\">\r\n\t\t\t\t{p.forma=='CI'?(<Pastel></Pastel>):(<PastelC></PastelC>)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\tcountCakes(p){\r\n\t\treturn(\r\n\t\t\tp.map(e=><option type=\"bottom\" >{p.indexOf(e)}</option>)\r\n\t\t)\r\n\t}\r\n\trender() {\r\n\t\t\r\n\t\tlet { imagePreviewUrl } = this.state;\r\n\t\tlet $imagePreview = null;\r\n\t\tif (imagePreviewUrl) {\r\n\t\t\t$imagePreview = (<img className =\"img-fluid shadow-lg \" style ={{margin:\"auto\"}} src={imagePreviewUrl} />);\r\n\t\t}\r\n\r\n\r\n\r\n\t\tif(this.state.pasteles.length>0){\r\n\t\t\t\r\n\t\t\treturn (\r\n\t\t\t\t\r\n\t\t\t\t<div className=\"crearPost justify-content-start\" >\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div className=\"col-lg-3\">\r\n\t\t\t\t\t\t<button className=\"btn-principal \" type =\"button\" data-toggle=\"collapse\" data-target='#form-post' aria-expanded=\"false\" aria-controls=\"\">+ Postear pedido</button>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<div className=\"form-post collapse multi-collapse \" id =\"form-post\">\r\n\t\t\t\t\t\t\t<div className=\"form col-sm-12 col-lg-12\">\r\n\t\t\t\t\t\t\t\t<div className=\"form-row \">\r\n\t\t\t\t\t\t\t\t\t<input  id =\"imgfile\" type=\"file\" onChange={this.handleImageChange} />\r\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"imgfile\" className=\" btn-secundario  justify-content-between\">\r\n\t\t\t\t\t\t\t\t\t\t<img className=\"foto\" src={foto}/>\r\n\t\t\t\t\t\t\t\t\t\tEscoger foto\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"form-row\">\r\n\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"pastelID\" className=\"\">Escoja la ID de su pastel:</label>\r\n\t\t\t\t\t\t\t\t\t\t\t<select className=\"form-control \" id=\"pastelID\" value={this.state.option} placeholder=\"h\" onChange = {this.handleSelect}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{this.countCakes(this.state.pasteles)}\r\n\t\t\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"data-post collapse multi-collapse  justify-content-center\"  id=\"form-post\">\r\n\t\t\t\t\t\t\t<div>{this.state.cakePaint!=undefined ?(this.paintCakes(this.state.cakePaint)):('')}</div>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<button className=\"btn-principal btn-mini\" type=\"button\"  onClick={this.crearPost}>Postear</button>\r\n\t\t\t\t\t\t\t<button className=\"btn-secundario btn-mini\" type=\"button\" data-toggle=\"collapse\" id=\"btn-cancelar\" data-target='#form-post' aria-expanded=\"false\" aria-controls=\"\">Cancelar</button>\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<a href=\"/crearPastel/\"><button className=\"btn-secundario\" type =\"button\">+ Crear pedido</button></a>\r\n\t\t\t\t\t</div>\r\n\r\n\r\n\t\t\t\t\t{/* <div className=\"col-lg-6  data-post\">\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<div className=\"col-lg-5 \" hidden='true'  id=\"post-collapse\">\r\n\t\t\t\t\t\t\t\t{$imagePreview}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-lg-7\">\t\t\t\r\n\t\t\t\t\t\t\t\t<div className =\" col-lg-12 col-sm-12 col-12\">\r\n\t\t\t\t\t\t\t\t\t{this.state.cakePaint!=undefined ?(this.paintCakes(this.state.cakePaint)):('')}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<button className=\"badge badge-info\" type=\"button\"  onClick={this.crearPost}>Post</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div> */}\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}else{\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"col-lg-3  card-body justify-content-center\">\r\n\t\t\t\t\t<label className=\"text-wrap\" for=\"pedido\" onClick={this.getCakes}>\r\n\t\t\t\t\t\tAun no tienes ningun pedido, empieza ahora!!\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<a href=\"crearPastel/\">\r\n\t\t\t\t\t\t\t<button className=\"btn-secundario\" id=\"pedido\">Crear Pedido</button>\r\n\t\t\t\t\t\t</a>\t\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}