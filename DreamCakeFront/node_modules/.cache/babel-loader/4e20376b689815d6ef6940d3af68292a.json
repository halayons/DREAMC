{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\joha\\\\Desktop\\\\dcake1\\\\DreamCakeFront\\\\src\\\\components\\\\Moderacion\\\\MainModerador.jsx\";\nimport './styles.scss';\nimport React from 'react';\nimport { Report } from './report';\nimport { CommentsReport } from './commentsReport';\nimport Cookies from 'js-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class Mod extends React.Component {\n  constructor() {\n    super();\n    this.ws = new WebSocket(\"ws://localhost:8000/ws/socialGeneral/\");\n    this.state = {\n      open: true,\n      open1: false,\n      posts: []\n    };\n  }\n\n  componentDidMount() {\n    this.requestUser();\n    this.loadPosts();\n\n    this.ws.onopen = evt => this.send();\n\n    this.ws.onclose = evt => window.location.reload();\n\n    this.ws.onmessage = evt => this.loadPosts();\n\n    this.ws.onerror = evt => console.log(JSON.stringify(evt));\n  }\n\n  loadPosts() {\n    const requestOptions = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-CSRFToken': Cookies.get('csrftoken')\n      },\n      credentials: \"include\"\n    };\n    fetch('http://localhost:8000/social/all_posts/', requestOptions).then(response => response.json()).then(json => this.setState({\n      posts: json\n    })).catch(error => console.log(error));\n  }\n\n  requestUser() {\n    fetch('http://localhost:8000/users/api/auth/user/', {\n      method: 'GET',\n      credentials: 'include',\n      headers: {}\n    }).then(response => response.json()).then(responseJson => {\n      if (!responseJson.is_staff) window.location.pathname = \"/\";\n    }).catch(error => console.error('Error:', error));\n  }\n\n  openComponent(name) {\n    switch (name) {\n      case \"Report\":\n        this.setState({\n          open: !this.state.open\n        });\n        this.setState({\n          open1: false\n        });\n        break;\n\n      case \"Comments\":\n        this.setState({\n          open: false,\n          open1: !this.state.open1\n        });\n        break;\n\n      default:\n        this.setState({\n          open: false,\n          open1: false\n        });\n    }\n  }\n\n  send() {\n    this.ws.send(JSON.stringify({\n      type: \"subscribe\",\n      id: new Date().getTime(),\n      action: 'list',\n      model: \"social.Post\"\n    }));\n  }\n\n  render() {\n    const {\n      open,\n      open1\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"d-flex justify-content-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          class: \"btn-navbar\",\n          onClick: () => {\n            this.openComponent(\"Report\");\n          },\n          children: \"Moderar Publicaciones \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          class: \"btn-navbar\",\n          onClick: () => {\n            this.openComponent(\"Comments\");\n          },\n          children: \"Moderar Comentarios \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 5\n      }, this), open && /*#__PURE__*/_jsxDEV(Report, {\n        datos: this.state.posts\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 14\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 5\n      }, this), open1 && /*#__PURE__*/_jsxDEV(CommentsReport, {\n        datos: this.state.posts\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"script\", {\n        src: \"node_modules/bootstrap/dist/js/bootstrap.min.js\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 4\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/joha/Desktop/dcake1/DreamCakeFront/src/components/Moderacion/MainModerador.jsx"],"names":["React","Report","CommentsReport","Cookies","Mod","Component","constructor","ws","WebSocket","state","open","open1","posts","componentDidMount","requestUser","loadPosts","onopen","evt","send","onclose","window","location","reload","onmessage","onerror","console","log","JSON","stringify","requestOptions","method","headers","get","credentials","fetch","then","response","json","setState","catch","error","responseJson","is_staff","pathname","openComponent","name","type","id","Date","getTime","action","model","render"],"mappings":";AAAA,OAAO,eAAP;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,QAAuB,UAAvB;AACA,SAASC,cAAT,QAA+B,kBAA/B;AACA,OAAOC,OAAP,MAAoB,WAApB;;AAGA,OAAO,MAAMC,GAAN,SAAkBJ,KAAK,CAACK,SAAxB,CAAkC;AAIxCC,EAAAA,WAAW,GAAG;AACb;AADa,SAFdC,EAEc,GAFT,IAAIC,SAAJ,CAAc,uCAAd,CAES;AAGb,SAAKC,KAAL,GAAa;AACZC,MAAAA,IAAI,EAAE,IADM;AAEZC,MAAAA,KAAK,EAAE,KAFK;AAGZC,MAAAA,KAAK,EAAE;AAHK,KAAb;AAKA;;AAEDC,EAAAA,iBAAiB,GAAG;AACnB,SAAKC,WAAL;AACA,SAAKC,SAAL;;AAEA,SAAKR,EAAL,CAAQS,MAAR,GAAiBC,GAAG,IAAI,KAAKC,IAAL,EAAxB;;AACA,SAAKX,EAAL,CAAQY,OAAR,GAAkBF,GAAG,IAAIG,MAAM,CAACC,QAAP,CAAgBC,MAAhB,EAAzB;;AACA,SAAKf,EAAL,CAAQgB,SAAR,GAAoBN,GAAG,IAAI,KAAKF,SAAL,EAA3B;;AACA,SAAKR,EAAL,CAAQiB,OAAR,GAAkBP,GAAG,IAAIQ,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,SAAL,CAAeX,GAAf,CAAZ,CAAzB;AACA;;AAEDF,EAAAA,SAAS,GAAG;AACX,UAAMc,cAAc,GAAG;AACtBC,MAAAA,MAAM,EAAE,KADc;AAEtBC,MAAAA,OAAO,EAAE;AACR,wBAAgB,kBADR;AAER,uBAAe5B,OAAO,CAAC6B,GAAR,CAAY,WAAZ;AAFP,OAFa;AAMtBC,MAAAA,WAAW,EAAE;AANS,KAAvB;AAQAC,IAAAA,KAAK,CAAC,yCAAD,EAA4CL,cAA5C,CAAL,CACEM,IADF,CACOC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADnB,EAEEF,IAFF,CAEOE,IAAI,IAAI,KAAKC,QAAL,CAAc;AAC3B1B,MAAAA,KAAK,EAAEyB;AADoB,KAAd,CAFf,EAKEE,KALF,CAKQC,KAAK,IAAIf,OAAO,CAACC,GAAR,CAAYc,KAAZ,CALjB;AAMA;;AAED1B,EAAAA,WAAW,GAAG;AACboB,IAAAA,KAAK,CAAC,4CAAD,EAA+C;AACnDJ,MAAAA,MAAM,EAAE,KAD2C;AAEnDG,MAAAA,WAAW,EAAE,SAFsC;AAGnDF,MAAAA,OAAO,EAAE;AAH0C,KAA/C,CAAL,CAKGI,IALH,CAKSC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EALtB,EAMEF,IANF,CAMOM,YAAY,IAAI;AACrB,UAAG,CAACA,YAAY,CAACC,QAAjB,EAA2BtB,MAAM,CAACC,QAAP,CAAgBsB,QAAhB,GAA2B,GAA3B;AAC3B,KARF,EAQIJ,KARJ,CAQUC,KAAK,IAAIf,OAAO,CAACe,KAAR,CAAc,QAAd,EAAwBA,KAAxB,CARnB;AASA;;AAEDI,EAAAA,aAAa,CAACC,IAAD,EAAO;AACnB,YAAQA,IAAR;AACC,WAAK,QAAL;AACC,aAAKP,QAAL,CAAc;AAAE5B,UAAAA,IAAI,EAAE,CAAC,KAAKD,KAAL,CAAWC;AAApB,SAAd;AACA,aAAK4B,QAAL,CAAc;AAAE3B,UAAAA,KAAK,EAAE;AAAT,SAAd;AACA;;AACD,WAAK,UAAL;AACC,aAAK2B,QAAL,CAAc;AAAE5B,UAAAA,IAAI,EAAE,KAAR;AAAeC,UAAAA,KAAK,EAAE,CAAC,KAAKF,KAAL,CAAWE;AAAlC,SAAd;AACA;;AACD;AACC,aAAK2B,QAAL,CAAc;AAAE5B,UAAAA,IAAI,EAAE,KAAR;AAAeC,UAAAA,KAAK,EAAE;AAAtB,SAAd;AATF;AAWA;;AAEDO,EAAAA,IAAI,GAAG;AACN,SAAKX,EAAL,CAAQW,IAAR,CAAaS,IAAI,CAACC,SAAL,CAAe;AAC3BkB,MAAAA,IAAI,EAAE,WADqB;AAE3BC,MAAAA,EAAE,EAAE,IAAIC,IAAJ,GAAWC,OAAX,EAFuB;AAG3BC,MAAAA,MAAM,EAAE,MAHmB;AAI3BC,MAAAA,KAAK,EAAE;AAJoB,KAAf,CAAb;AAMA;;AAEDC,EAAAA,MAAM,GAAG;AACR,UAAM;AAAE1C,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAkB,KAAKF,KAA7B;AACA,wBACC;AAAA,8BAGC;AAAK,QAAA,KAAK,EAAC,+BAAX;AAAA,gCACC;AAAQ,UAAA,IAAI,EAAC,QAAb;AAAsB,UAAA,KAAK,EAAC,YAA5B;AAAyC,UAAA,OAAO,EAAE,MAAM;AAAE,iBAAKmC,aAAL,CAAmB,QAAnB;AAA8B,WAAxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADD,eAGC;AAAQ,UAAA,IAAI,EAAC,QAAb;AAAsB,UAAA,KAAK,EAAC,YAA5B;AAAyC,UAAA,OAAO,EAAE,MAAM;AAAE,iBAAKA,aAAL,CAAmB,UAAnB;AAAgC,WAA1F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHD;AAAA;AAAA;AAAA;AAAA;AAAA,cAHD,EAUElC,IAAI,iBAAI,QAAC,MAAD;AAAQ,QAAA,KAAK,EAAE,KAAKD,KAAL,CAAWG;AAA1B;AAAA;AAAA;AAAA;AAAA,cAVV,eAWC;AAAA;AAAA;AAAA;AAAA,cAXD,EAYED,KAAK,iBAAI,QAAC,cAAD;AAAgB,QAAA,KAAK,EAAE,KAAKF,KAAL,CAAWG;AAAlC;AAAA;AAAA;AAAA;AAAA,cAZX,eAcC;AAAQ,QAAA,GAAG,EAAC;AAAZ;AAAA;AAAA;AAAA;AAAA,cAdD;AAAA;AAAA;AAAA;AAAA;AAAA,YADD;AAmBA;;AAjGuC","sourcesContent":["import './styles.scss';\r\nimport React from 'react';\r\nimport { Report } from './report';\r\nimport { CommentsReport } from './commentsReport';\r\nimport Cookies from 'js-cookie';\r\n\r\n\r\nexport class Mod extends React.Component {\r\n\r\n\tws = new WebSocket(\"ws://localhost:8000/ws/socialGeneral/\")\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.state = {\r\n\t\t\topen: true,\r\n\t\t\topen1: false,\r\n\t\t\tposts: [],\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.requestUser();\r\n\t\tthis.loadPosts();\r\n\r\n\t\tthis.ws.onopen = evt => this.send();\r\n\t\tthis.ws.onclose = evt => window.location.reload();\r\n\t\tthis.ws.onmessage = evt => this.loadPosts();\r\n\t\tthis.ws.onerror = evt => console.log(JSON.stringify(evt));\r\n\t}\r\n\r\n\tloadPosts() {\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'X-CSRFToken': Cookies.get('csrftoken')\r\n\t\t\t},\r\n\t\t\tcredentials: \"include\",\r\n\t\t};\r\n\t\tfetch('http://localhost:8000/social/all_posts/', requestOptions)\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(json => this.setState({\r\n\t\t\t\tposts: json\r\n\t\t\t}))\r\n\t\t\t.catch(error => console.log(error));\r\n\t}\r\n\r\n\trequestUser() {\r\n\t\tfetch('http://localhost:8000/users/api/auth/user/', {\r\n\t\t\tmethod: 'GET',\r\n\t\t\tcredentials: 'include',\r\n\t\t\theaders: {\r\n\t\t\t},\r\n\t\t}).then((response) => response.json())\r\n\t\t\t.then(responseJson => {\r\n\t\t\t\tif(!responseJson.is_staff) window.location.pathname = \"/\";\r\n\t\t\t}).catch(error => console.error('Error:', error));\r\n\t}\r\n\r\n\topenComponent(name) {\r\n\t\tswitch (name) {\r\n\t\t\tcase \"Report\":\r\n\t\t\t\tthis.setState({ open: !this.state.open });\r\n\t\t\t\tthis.setState({ open1: false })\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Comments\":\r\n\t\t\t\tthis.setState({ open: false, open1: !this.state.open1 });\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthis.setState({ open: false, open1: false });\r\n\t\t}\r\n\t};\r\n\r\n\tsend() {\r\n\t\tthis.ws.send(JSON.stringify({\r\n\t\t\ttype: \"subscribe\",\r\n\t\t\tid: new Date().getTime(),\r\n\t\t\taction: 'list',\r\n\t\t\tmodel: \"social.Post\"\r\n\t\t}))\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { open, open1 } = this.state;\r\n\t\treturn (\r\n\t\t\t<div>\r\n\r\n\r\n\t\t\t\t<div class=\"d-flex justify-content-center\">\r\n\t\t\t\t\t<button type=\"button\" class=\"btn-navbar\" onClick={() => { this.openComponent(\"Report\") }}>\r\n\t\t\t\t\t\tModerar Publicaciones </button>\r\n\t\t\t\t\t<button type=\"button\" class=\"btn-navbar\" onClick={() => { this.openComponent(\"Comments\") }}>\r\n\t\t\t\t\t\tModerar Comentarios </button>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{open && <Report datos={this.state.posts} />}\r\n\t\t\t\t<hr />\r\n\t\t\t\t{open1 && <CommentsReport datos={this.state.posts} />}\r\n\r\n\t\t\t\t<script src=\"node_modules/bootstrap/dist/js/bootstrap.min.js\"></script>\r\n\t\t\t</div>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n"]},"metadata":{},"sourceType":"module"}